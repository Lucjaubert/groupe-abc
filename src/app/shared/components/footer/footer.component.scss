@use "sass:map";
@use "../../../../styles/_variables.scss" as vars;

/* ===== Section ===== */
.section{
  position: relative; isolation: isolate;

  .section-bg{
    position: absolute; inset: 0; left: 50%;
    width: 100vw; transform: translateX(-50%);
    z-index: 0; background: var(--section-bg, transparent);
  }

  .section-inner{
    position: relative; z-index: 1;
    width: 100%;
    margin-inline: auto;
    padding-inline: var(--content-gutter);
    padding-block: 34px; /* conforme Ã  la maquette */
  }
}

/* ===== Footer ===== */
.footer{
  color:#FFF;

  .footer-title{
    margin: 0 0 20px 0;
    font-size: 30px; font-weight: 400; line-height: normal; color:#FFF;
  }

  /* ---- Formulaire en grille 3 colonnes ---- */
  .contact-grid{
    --gap: 10px;

    display: grid;
    grid-template-columns:
      minmax(496px, 2fr)
      minmax(298px, 1.25fr)
      minmax(217.5px, 1fr);
    grid-template-rows: 42.69px 42.69px;
    column-gap: var(--gap);
    row-gap: 10px;

    width: 100%;
    margin: 0 0 28px 0;
    align-items: center;

    textarea,
    input{
      width: 100%;
      height: 42.69px;
      color:#444697; background:#FFF; border:none; border-radius:6px;
      box-shadow: 0 0 0 1px rgba(0,0,0,.06) inset;
      padding:10px 14px;
      &::placeholder{ color:#444697; opacity:1; }
    }

    textarea{
      grid-column: 1; grid-row: 1 / span 2;
      height: 93.71px; resize:none; padding:12px 14px; /* lÃ©gÃ¨re diff pour caler la baseline */
    }

    #footer-name{ grid-column: 2; grid-row: 1; }
    #footer-mail{ grid-column: 2; grid-row: 2; }
    #footer-tel { grid-column: 3; grid-row: 1; }

    .btn-send{
      grid-column: 3; grid-row: 2;
      height: 42.69px; width: 100%;
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 12px;
      background: #E74040; color:#FFF;
      border: none; border-radius: 6px; cursor: pointer;
      transition: background-color .2s ease, transform .15s ease, opacity .15s ease;

      .btn-label{ pointer-events: none; }

      .ico-send { width: 30.642px; height: 18.813px; flex-shrink: 0; }
      .ico-check{ display: none; width: 22px; height: 22px; flex-shrink: 0; fill:#FFF; }

      &:hover:not(:disabled){ transform: translateY(-1px); opacity:.95; }
      &:active:not(:disabled){ transform: none; opacity:.9; }
      &:focus-visible{ outline: 2px solid #FFF; outline-offset: 2px; }

      &.is-loading{ cursor: progress; opacity:.8; }

      &.is-success{
        background:#2BB673;
        .ico-send{ display:none; }
        .ico-check{ display:block; }
      }

      &:disabled{ cursor: default; }
    }
  }

  /* ---- Ligne dâ€™info : contact gauche, LinkedIn droite, mentions en dessous ---- */
  .meta-row{
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    row-gap: 8px;
    column-gap: 12px;
    margin-top: 8px;
  }

  .footer-contact{
    grid-column: 1 / 2;
    margin: 0;
    font: 400 22px/normal "Plus Jakarta Sans", sans-serif;
    color:#FFF;
    text-align: left;

    /* espaces garantis autour des slash */
    .sep{
      display:inline-block;
      margin: 0 .5em;           /* â† espace avant et aprÃ¨s â€œ/â€ */
      opacity:.95;
      user-select:none;
    }

    /* liens en blanc (desktop & mobile) */
    a,
    a:visited{
      color:#FFF;
      text-decoration:none;
    }
    a:hover{ text-decoration: underline; }
  }

  .socials{
    grid-column: 2 / 3;
    display: flex; align-items: center; justify-content: flex-end;
    .linkedin img{ width:39.47px; height:41.097px; display:block; }
  }

  .footer-legal{
    grid-column: 1 / -1; /* prend toute la ligne en dessous */
    margin: 0;
    color:#FFF; font-size: 12px; font-weight: 400; line-height: normal;
  }

  /* ---- Responsive ---- */
  @media (max-width: 1024px){
    .contact-grid{
      grid-template-columns: 1fr;
      grid-template-rows: auto;
      column-gap: 0; row-gap: 12px;

      textarea{ grid-column: 1; grid-row: 1; }
      #footer-name{ grid-column: 1; grid-row: 2; }
      #footer-mail{ grid-column: 1; grid-row: 3; }
      #footer-tel { grid-column: 1; grid-row: 4; }
      .btn-send  { grid-column: 1; grid-row: 5; max-width: 360px; margin-inline: auto; }
    }

    .meta-row{
      grid-template-columns: 1fr;
      row-gap: 8px;
      .socials{ justify-content: flex-start; }
      .footer-contact{ text-align: left; font-size: 18px; }
    }
  }
}

/* utilitaire accessibilitÃ© (au cas oÃ¹ hors global) */
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}


/* ---- Responsive MOBILE (â‰¤ 768px) ---- */
@media (max-width: 768px){
  .section .section-inner{
    padding-block: 24px;
  }

  .footer{
    /* Titre : "Prise de contact rapide" */
    .footer-title{
      margin: 0 0 12px 0;
      color:#FFF;
      font-family:"Plus Jakarta Sans", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      font-size:20px;
      font-style:normal;
      font-weight:400;
      line-height:30px; /* 150% */
    }

    /* Formulaire : grille 2 colonnes */
    .contact-grid{
      --gap: 10px;
      display: grid;
      grid-template-columns: 1fr 1fr;  /* â† 2 colonnes Ã©gales : Nom | TÃ©lÃ©phone */
      grid-template-rows: auto;
      column-gap: var(--gap);
      row-gap: 12px;
      width: 100%;

      textarea{
        grid-column: 1 / -1;   /* pleine largeur */
        grid-row: 1;
        min-height: 132px;
      }

      #footer-name{ grid-column: 1; grid-row: 2; }
      #footer-tel { grid-column: 2; grid-row: 2; }
      #footer-mail{ grid-column: 1 / -1; grid-row: 3; }

      /* ðŸ‘‰ Bouton = mÃªme largeur et alignement que "TÃ©lÃ©phone" */
      > .btn-send{
        grid-column: 2;          /* colonne de droite uniquement */
        grid-row: 4;
        justify-self: stretch;   /* prend toute la largeur de la colonne */
        align-self: start;
        width: 100%;             /* = largeur de #footer-tel */
        height: 42.69px;         /* mÃªme hauteur que les inputs */
        padding-inline: 12px;
        box-sizing: border-box;

        /* Annule le centrage dÃ©fini pour â‰¤1024px */
        margin: 0 !important;
        max-width: none !important;

        .ico-send{ width: 24px; height: 16px; }
      }
    }

    /* Ligne dâ€™info : texte Ã  gauche, LinkedIn Ã  droite, mentions dessous */
    .meta-row{
      display: grid;
      grid-template-columns: 1fr auto;
      grid-template-areas:
        "contact socials"
        "legal   legal";
      align-items: start;
      row-gap: 8px;
      column-gap: 12px;
      margin-top: 92px;
    }

    .footer-contact{
      grid-area: contact;
      margin: 0;
      color:#FFF;
      font-family:"Plus Jakarta Sans", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      font-size: 18px;
      font-style: normal;
      font-weight: 400;
      line-height: 30px; /* 166.667% */
      text-align: left;

      /* --- MOBILE : 3 lignes fixes (adresse, tÃ©l, mail) --- */
      .sep{ display:none; }      /* cache les "/" */
      .addr, .tel, .mail{
        display:block;
        margin:0;
        font-size: 18px;
      }

      /* liens blancs aussi en mobile */
      a,
      a:visited{
        color:#FFF;
        text-decoration:none;
      }
    }

    .socials{
      grid-area: socials;
      align-self: start;
      justify-content: flex-end;

      .linkedin img{
        width: 35px;
        height: 35px;
        flex-shrink: 0;
        display: block;
      }
    }

    .footer-legal{
      grid-area: legal;
      margin: 0;
      color:#FFF;
      font-family:"Plus Jakarta Sans", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      font-size: 10px;
      font-style: normal;
      font-weight: 400;
      line-height: 30px;
    }
  }
}
