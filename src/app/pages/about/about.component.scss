@use "sass:map";
@use "../../../styles/_variables.scss" as vars;

.about-wrapper { width: 100%; }

/* ===== Section ===== */
.section {
  position: relative;
  isolation: isolate;

  /* Variable de padding vertical (par défaut) */
  --pad-y: clamp(48px, 7vw, 96px);

  .section-inner {
    position: relative;
    z-index: 1;
    width: 100%;
    margin-inline: auto;
    padding-inline: clamp(16px, 3vw, 40px);
    padding-block: var(--pad-y);
  }
}

/* ===== Titre de page ===== */
.page-title{
  color: #444798;
  font-size: 60px;
  font-weight: 400;
  line-height: normal;
  margin: 0 0 24px;
}

.page-subtitle{
  color: #444697;
  font-size: clamp(18px, 2vw, 24px);
  font-weight: 400;
  margin: 0;
}

/* ===================================================================== */
/* ============================  CORE  ================================== */
/* ===================================================================== */
.block-title{
  color: #444798;
  font-size: clamp(28px, 3.2vw, 40px);
  font-weight: 400;
  line-height: 1.1;
  margin: 0 0 58px;
}

.core-grid{
  --core-gap: var(--section-gap-x, 148px);
  --core-left-col: 55%;

  display: grid;
  grid-template-columns: 1fr;
  grid-template-areas:
    "left"
    "right"
    "below";
  row-gap: clamp(28px, 4vw, 48px);
  align-items: start;

  @media (min-width: 992px){
    grid-template-columns:
      minmax(0, var(--core-left-col))
      minmax(0, calc(100% - var(--core-left-col)));
    grid-template-areas:
      "left  right"
      "below below";
    column-gap: var(--core-gap);
  }
}

.core-left  {
  grid-area: left;
  display: flex;
  flex-direction: column;
}

.core-right {
  grid-area: right;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: left;
  gap: clamp(16px, 2vw, 24px);
}

.core-below {
  grid-area: below;
  display: flex;
  flex-direction: column;
}

.block-html{
  color: #444697;
  font-size: 16px;
  font-weight: 400;
  line-height: 1.6;

  p{ margin: 0 0 12px; }
  p:first-child{ margin-top: 0; }
  p:last-child{ margin-bottom: 0; }
}

.core .where-panel{
  position: static !important;
  inset: auto !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  transition: none !important;
}

.panel-list.about-where-list{
  list-style: none;
  margin: 0;
  padding: 0;

  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: clamp(10px, 1.8vw, 14px);

  max-width: 320px;
  width: 100%;
}

.panel-list.about-where-list li{
  display: flex;
  align-items: center;
  gap: 10px;

  color: #444798;
  font-size: 22px;
  font-weight: 400;
  line-height: normal;
  margin: 0;

  &::before{
    content: "—";
    color: #E44D4D;
    font-size: 20px;
    font-weight: 400;
    margin-right: 6px;
    flex: 0 0 auto;
  }
}

/* ===== CTA ===== */
.cta-btn{
  width: clamp(173px, 32vw, 244.5px);
  height: clamp(27px, 2.6vw, 28.113px);
  min-width: 173px;
  max-width: 244.5px;
  display: flex;
  align-items: center;
  border: 0;
  border-radius: 5px;
  background: #444798;
  color: #fff;
  padding-left: 12px;
  padding-right: 8px;
  cursor: pointer;
  font-weight: 400;
  font-size: clamp(11px, 1.4vw, 12px);
  line-height: 1;
  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
  &:hover { filter: brightness(1.04); }
  &:active { transform: translateY(1px); }
  &:focus-visible { outline: 2px solid #EA4D4D; outline-offset: 2px; }
}
.cta-label{ margin-right: 12px; white-space: nowrap; }
.cta-plus{
  margin-left: auto;
  display: inline-grid;
  place-items: center;
  width: 22px; height: 22px;
}
.icon-plus{
  width: 22px; height: 22px;
  stroke: #EA4D4D; stroke-width: 3.2;
  stroke-linecap: round; fill: none;
}

/* ===== Mesh ===== */
.mesh {
  .mesh-title{
    color:#444697;
    font-size: 36px;
    font-weight: 400;
    line-height: normal;
    text-align: center;
    margin: 0 0 clamp(24px,4vw,32px);
  }

  .mesh-skyline{
    width: 100%;
    margin-bottom: clamp(16px,3.2vw,24px);

    img{
      display: block;
      width: 100%;
      height: auto;
      margin-inline: auto;
      margin-top: 70px;
    }
  }

  .mesh-levels{
    position: relative;
    list-style: none;
    margin: 0;
    padding: 14px 0 0;

    &::before{
      content: "";
      position: absolute;
      left: 0; right: 0;
      top: 0;
      height: 2px;
      background: #444798;
    }

    li{
      position: absolute;
      top: 18px;
      color: #444798;
      font-size: 24px;
      font-weight: 400;
      line-height: normal;
      text-transform: uppercase;
      white-space: nowrap;
    }

    li:first-child{
      left: 0;
      text-align: left;
    }

    li:nth-child(2){
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
    }

    li:last-child{
      right: 0;
      text-align: right;
    }
  }
}

/* ============================  MAP SECTION (Où ?) ============================ */
.map-section {
  .map-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: clamp(24px, 4vw, 48px);
    align-items: center;

    @media (min-width: 992px) {
      grid-template-columns: 2fr 400px;
      column-gap: clamp(100px, 12vw, 160px);
    }
  }

  .map-image {
    display: flex;
    align-items: center;
    justify-content: flex-start;

    img {
      display: block;
      width: 100%;
      height: auto;
      max-width: 100%;

      @media (min-width: 992px) {
        max-width: clamp(760px, 58vw, 980px);
      }
    }
  }

  .map-list {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-self: center;
    gap: clamp(16px, 2vw, 24px);

    .map-title {
      color: #444798;
      font-size: 48px;
      font-style: normal;
      font-weight: 400;
      line-height: normal;
      margin: 0 0 12px;
    }

    ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      gap: clamp(10px, 1.8vw, 14px);
    }

    li {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #444798;
      font-size: 22px;
      font-weight: 400;
      line-height: normal;

      &::before {
        content: "—";
        color: #E44D4D;
        font-size: 20px;
        font-weight: 400;
        margin-right: 6px;
        flex: 0 0 auto;
      }
    }
  }
}

/* ====== NOS VALEURS ====== */
.values {
  min-block-size: 506px;
  --pad-y: clamp(56px, 6vw, 80px);
  .section-inner { padding-block: var(--pad-y); }

  .values-bg{
    position: absolute;
    top: 0; bottom: 0;
    left: calc(-1 * var(--content-gutter));
    right: calc(-1 * var(--content-gutter));
    pointer-events: none;
    z-index: 0;

    .values-layer{
      position: absolute; inset: 0;
      background: #F5F4F8;
      opacity: 1;
    }
  }

  .values-title{
    color:#444798;
    font-weight:400;
    text-align:center;
    font-size: clamp(28px, 3.2vw, 40px);
    line-height: 1.1;
    margin: 0 0 80px;
  }

  .values-grid{
    display:grid;
    grid-template-columns: repeat(1, minmax(240px, 1fr));
    gap: clamp(28px, 4vw, 48px);
    justify-items:center;
    align-items:start;

    @media (min-width: 992px){
      grid-template-columns: repeat(3, 1fr);
      column-gap: clamp(80px, 10vw, 140px);
    }
  }

  .value-item{
    position: relative;
    display:flex; flex-direction:column; align-items:center;
    text-align:center;
    max-width: 360px;

    .icon-wrap{
      display:grid; place-items:center;
      margin-bottom: clamp(16px, 2vw, 20px);

      img{
        display:block;
        max-width: clamp(84px, 7vw, 96px);
        max-height: clamp(84px, 7vw, 96px);
        height:auto; width:auto;
      }
    }

    .value-name{
      color:#444798;
      font-weight:400;
      font-size: clamp(18px, 2.1vw, 22px);
      line-height: 1.25;
      margin: 0 0 clamp(10px, 1.6vw, 12px);
    }

    .value-desc{
      color:#444697;
      font-weight:400;
      font-size: clamp(13px, 1.6vw, 14px);
      line-height: 1.55;
      max-width: 320px;

      p{ margin:0; }
      p + p{ margin-top: 6px; }
    }

    .divider{
      display:none;

      @media (min-width: 992px){
        display:block;
        position:absolute;
        top: calc(clamp(84px, 7vw, 96px) / 2 + 10px);
        right: calc(-1 * clamp(40px, 5vw, 70px));
        width: clamp(64px, 7vw, 96px);
        height: 2px;
        background: #444798;
        opacity: .45;
        transform: translateY(-50%);
      }
    }
  }
}

/* ===== Appartenance (ajustements maquette) ===== */
.affiliations {
  .aff-title{
    color:#444697;
    font-size:36px;
    font-weight:400;
    line-height:normal;
    margin: 0 0 58px;
  }

  .aff-list{
    list-style:none;
    margin:0; padding:0;
    border-top: 2px solid #444798;
  }
  .aff-row{ border-bottom: 2px solid #444798; }

  .aff-line{
    display:grid;
    grid-template-columns: 1fr auto auto;
    align-items:center;
    column-gap: 0;
    padding-block: 14px;
  }

  .aff-name{
    display:flex; flex-wrap:wrap; align-items:center; gap:8px;
  }
  .aff-abbr{ color:#444798; font-size:24px; font-weight:400; line-height:normal; }
  .aff-label{ color:#444798; font-size:18px; font-weight:400; line-height:normal; }

  .aff-logo{
    width:75px; height:75px;
    aspect-ratio:1 / 1;
    object-fit:contain;
    flex-shrink:0;
    margin-right: 80px;
    justify-self:end;
  }

  .aff-toggle{
    background:none; border:0; padding:0;
    color:#444798; cursor:pointer; justify-self:end;
  }
  .chevron{
    width:24px; height:34.66px; flex-shrink:0;
    transform: rotate(90deg);
    transition: transform .25s ease;
  }
  .aff-row.open .chevron{ transform: rotate(0deg); }

  .aff-desc{ padding: 8px 0 18px; }
  .aff-desc-inner{
    color:#444697; font-size:16px; line-height:1.55;
    p{ margin:0 0 10px; } p:last-child{ margin-bottom:0; }
  }

  @media (max-width: 640px){
    .aff-line{ grid-template-columns: 1fr auto; row-gap: 10px; }
    .aff-logo{ grid-column: 1 / -1; justify-self:start; margin-right: 0; }
  }
}

/* ===== Déontologie — mêmes espacements que Appartenance ===== */
.deon {
  .deon-title{
    color:#444697;
    font-size:36px;
    font-weight:400;
    line-height:normal;
    margin: 0 0 58px;
  }

  .deon-list{
    list-style:none;
    margin:0; padding:0;
    border-top: 2px solid #444798;
  }
  .deon-row{ border-bottom: 2px solid #444798; }

  .deon-line{
    --row-h: 98px;
    display:grid;
    grid-template-columns: 1fr auto;
    align-items:center;
    block-size: var(--row-h);
    padding-block: 0;
  }

  .deon-name{
    color:#444798;
    font-size:20px;
    font-weight:400;
    line-height:1;
    margin:0;
  }

  .deon-toggle{
    background:none; border:0; padding:0;
    color:#444798; cursor:pointer; justify-self:end;
  }
  .chevron{
    width:24px; height:34.66px;
    transform: rotate(90deg);
    transition: transform .25s ease;
  }
  .deon-row.open .chevron{ transform: rotate(0deg); }

  .deon-desc{ padding: 8px 0 18px; }
  .deon-desc-inner{
    color:#444697; font-size:16px; line-height:1.55;
    p{ margin:0 0 10px; } p:last-child{ margin-bottom:0; }
  }
}

/* ============================  TIMELINE (grid 2 colonnes) ============================ */
.timeline{
  --years-col: 152px;
  --rail-w: 2px;
  --row-gap: 96px;
  --dash-w: 24px;
  --rail-gap: clamp(48px, 6vw, 110px);
  --content-max: 940px;

  position: relative;
  isolation: isolate;

  .timeline-bg{ position:absolute; inset:0; left:calc(-1 * var(--content-gutter)); right:calc(-1 * var(--content-gutter)); pointer-events:none; z-index:0;
    .timeline-layer{ position:absolute; inset:0; background:#F5F4F8; }
  }
  .section-inner{ position:relative; z-index:1; }

  .tl-grid{
    position: relative;
    display: grid;
    grid-template-columns: var(--years-col) 1fr;
    column-gap: var(--rail-gap);
    row-gap: var(--row-gap);
  }

  .tl-rail{
    position: absolute;
    top: 0;
    bottom: 0;
    left: calc(var(--years-col) + var(--rail-gap));
    width: var(--rail-w);
    background:#444798;
    z-index:0;
  }

  .timeline-title{
    grid-column: 1 / -1;
    margin: 0 0 clamp(28px, 4vw, 40px);
    max-width: var(--content-max);
    margin-inline: auto;
    text-align: center;
    color:#444798; font-weight:400; font-size:clamp(28px, 3.2vw, 40px); line-height:1.1;
  }

  .tl-year{
    justify-self: end;
    align-self: start;
    color:#444798; font-size:24px; font-weight:400; line-height:1;
    position: relative;
    text-align: right;
    white-space: nowrap;
    padding-right: calc(var(--rail-gap) + var(--rail-w));

    &::after{
      content:"";
      position: absolute;
      top: .6em;
      right: calc(var(--rail-gap) - var(--dash-w) - 6px);
      width: var(--dash-w);
      height: 2px;
      background:#E44D4D;
    }
  }

  .tl-body{
    grid-column: 2;
    max-width: var(--content-max);
    width: 100%;
    justify-self: center;
    margin-inline: auto;
    padding-left: var(--rail-gap);
  }

  .tl-item-title{
    color:#444798; font-weight:400; font-size:clamp(18px, 2vw, 22px); line-height:1.25; margin:0 0 10px;
  }
  .tl-desc{
    color:#444697; font-weight:400; font-size:14px; line-height:1.55;
    p{ margin:0; } p + p{ margin-top:6px; }
  }

  @media (max-width: 720px){
    --years-col: 110px;
    --row-gap: 64px;
    --rail-gap: clamp(28px, 8vw, 64px);
    --content-max: 92vw;
  }
}
